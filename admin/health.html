<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Admin Health</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:#0b0d10;color:#e8eef4;margin:0;padding:24px}
  .ok{color:#34d399}.err{color:#f87171}.box{background:#0f141a;border:1px solid #1d2833;border-radius:10px;padding:14px;margin:12px 0}
  code{background:#0b1218;padding:2px 6px;border-radius:6px;border:1px solid #1d2833}
</style>
</head>
<body>
<h1>Admin Health Check</h1>
<div id="out" class="box">Runningâ€¦</div>
<script>
(async () => {
  const out = document.getElementById('out');
  function esc(s){return s.replace(/[&<>]/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[m]));}
  function log(msg, cls){ const d=document.createElement('div'); d.className='box '+(cls||''); d.innerHTML=msg; document.body.appendChild(d); }
  out.remove();
  try {
    const r = await fetch('./config.yml', { cache: 'no-store' });
    log(`<b>Fetch config.yml:</b> status <code>${r.status}</code>`, r.ok?'ok':'err');
    const txt = await r.text();
    log(`<details><summary>config.yml preview</summary><pre>${esc(txt)}</pre></details>`);
  } catch (e) { log('Error fetching config.yml: '+e, 'err'); }
  try {
    const id = await fetch('/.netlify/identity', { method:'HEAD' });
    log(`<b>Identity endpoint:</b> status <code>${id.status}</code>`, id.ok?'ok':'err');
  } catch (e) { log('Identity check error: '+e, 'err'); }
})();
</script>
</body>
</html>
